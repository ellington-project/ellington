name: ellington
version: "0.2.0"
author: Adam Harries <harries.adam@gmail.com>
about: Automated BPM calculation for swing dance DJs
subcommands:
    - init: 
        about: Initalise an ellingotn "library" - essentially a cache for computed estimator values
        args: 
            - LIBRARY:
                help: The library file to initialise
                required: true
                index: 1
            - itunes:
                short: i
                long: itunes
                value_name: itunes
                required: false
                takes_value: true
                help: The iTunes library file with track information.
                conflicts_with: directory
            - directory: 
                short: d 
                long: directory
                value_name: directory
                required: false
                takes_value: true
                help: A directory containing (recursively) audio files to process
                conflicts_with: itunes
    - query:
        about: Query a file for tempo information, stored either in the file, in cache, or obtained from estimators. 
        args: 
            - AUDIOFILE: 
                help: The audio file about which to query information. 
                required: true 
                index: 1

            - metadata: 
                help: The metadata of the file (if any!) to modify with ellington data. 
                required: false 
                short: m
                long: metadata 
                takes_value: true 
                possible_values: ['title', 'comments', 'userdata']

            - modification: 
                help: The kind of modification behaviour to perform on "raw" metadata (i.e. metadata without any existing ellington data). If the metadata already contains ellington data, it will be updated.
                required: false 
                requires: metadata 
                short: b
                long: modification 
                takes_value: true 
                possible_values: ['prepend', 'append']

            - userdata: 
                help: User supplied metadata to update with ellington data. 
                required: false 
                requires: metadata 
                required_if: 
                    - [metadata, userdata]
                short: u 
                long: userdata
                takes_value: true

            - estimators: 
                help: Run the following estimators, or query their results from the cache, and report the results. If not specified, "all" is assumed. 
                required: false 
                short: e 
                long: estimators
                takes_value: true 
                possible_values: ['actual', 'naive', 'bellson', 'all']
                default_value: all

    - bpm: 
        about: Run a bpm algorithm across an ellington library
        args: 
            - LIBRARY:
                help: The library file from which to process tracks
                required: true
                index: 1
    - oneshot: 
        about: Run a tempo estimation algorithm on a single audio track with a comment, and add data to the comment
        version: "0.1.0"
        author: Adam Harries <harries.adam@gmail.com> 
        args: 
            - audiofile: 
                help: The audio file to process
                short: a
                long: audiofile
                required: true 
                takes_value: true
            - comment: 
                help: The existing comment in the audio file. This command will append calculated data to this comment. If no comment is specified, ellington will return a fresh metadata block.
                short: c 
                long: comment
                required: false
                takes_value: true 
            - minimal: 
                help: Print the output using the minimal formatter. 
                short: m 
                long: minimal
